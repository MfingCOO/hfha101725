"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7473],{11186:(e,a,s)=>{s.d(a,{bq:()=>m,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>u});var r=s(95155),t=s(12115),l=s(4729),i=s(59007),n=s(42614),o=s(72251),d=s(64269);let c=l.bL;l.YJ;let u=l.WT,m=t.forwardRef((e,a)=>{let{className:s,children:t,...n}=e;return(0,r.jsxs)(l.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[t,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let f=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let x=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let p=t.forwardRef((e,a)=>{let{className:s,children:t,position:i="popper",...n}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,r.jsx)(f,{}),(0,r.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(x,{})]})})});p.displayName=l.UC.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=l.JU.displayName;let h=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsxs)(l.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:t})]})});h.displayName=l.q7.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=l.wv.displayName},13406:(e,a,s)=>{s.d(a,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>n});var r=s(95155),t=s(12115),l=s(25667),i=s(64269);let n=l.bL,o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.B8,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t})});o.displayName=l.B8.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.l9,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t})});d.displayName=l.l9.displayName;let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.UC,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t})});c.displayName=l.UC.displayName},13496:(e,a,s)=>{s.d(a,{Accordion:()=>o,AccordionContent:()=>u,AccordionItem:()=>d,AccordionTrigger:()=>c});var r=s(95155),t=s(12115),l=s(16083),i=s(59007),n=s(64269);let o=l.bL,d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.q7,{ref:a,className:(0,n.cn)("border-b",s),...t})});d.displayName="AccordionItem";let c=t.forwardRef((e,a)=>{let{className:s,children:t,...o}=e;return(0,r.jsx)(l.Y9,{className:"flex",children:(0,r.jsxs)(l.l9,{ref:a,className:(0,n.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...o,children:[t,(0,r.jsx)(i.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=l.l9.displayName;let u=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsx)(l.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,r.jsx)("div",{className:(0,n.cn)("pb-4 pt-0",s),children:t})})});u.displayName=l.UC.displayName},35027:(e,a,s)=>{s.d(a,{v:()=>t});var r=s(30926);let t=(0,r.createServerReference)("0040382fd18135f5ab4556e1059e6b125c63815c40",r.callServer,void 0,r.findSourceMapURL,"getSiteSettingsAction")},41052:(e,a,s)=>{s.d(a,{C5:()=>j,MJ:()=>h,Rr:()=>v,eI:()=>x,lR:()=>p,lV:()=>d,zB:()=>u});var r=s(95155),t=s(12115),l=s(32467),i=s(22544),n=s(64269),o=s(76444);let d=i.Op,c=t.createContext({}),u=e=>{let{...a}=e;return(0,r.jsx)(c.Provider,{value:{name:a.name},children:(0,r.jsx)(i.xI,{...a})})},m=()=>{let e=t.useContext(c),a=t.useContext(f),{getFieldState:s,formState:r}=(0,i.xW)(),l=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=a;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},f=t.createContext({}),x=t.forwardRef((e,a)=>{let{className:s,...l}=e,i=t.useId();return(0,r.jsx)(f.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:a,className:(0,n.cn)("space-y-2",s),...l})})});x.displayName="FormItem";let p=t.forwardRef((e,a)=>{let{className:s,...t}=e,{error:l,formItemId:i}=m();return(0,r.jsx)(o.J,{ref:a,className:(0,n.cn)(l&&"text-destructive",s),htmlFor:i,...t})});p.displayName="FormLabel";let h=t.forwardRef((e,a)=>{let{...s}=e,{error:t,formItemId:i,formDescriptionId:n,formMessageId:o}=m();return(0,r.jsx)(l.DX,{ref:a,id:i,"aria-describedby":t?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!t,...s})});h.displayName="FormControl";let v=t.forwardRef((e,a)=>{let{className:s,...t}=e,{formDescriptionId:l}=m();return(0,r.jsx)("p",{ref:a,id:l,className:(0,n.cn)("text-sm text-muted-foreground",s),...t})});v.displayName="FormDescription";let j=t.forwardRef((e,a)=>{var s;let{className:t,children:l,...i}=e,{error:o,formMessageId:d}=m(),c=o?String(null!=(s=null==o?void 0:o.message)?s:""):l;return c?(0,r.jsx)("p",{ref:a,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",t),...i,children:c}):null});j.displayName="FormMessage"},44846:(e,a,s)=>{s.d(a,{d:()=>n});var r=s(95155),t=s(12115),l=s(27599),i=s(64269);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-muted",s),...t,ref:a,children:(0,r.jsx)(l.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.bL.displayName},45458:(e,a,s)=>{s.d(a,{d:()=>n});var r=s(95155),t=s(12115),l=s(64269),i=s(65142);let n=t.forwardRef((e,a)=>{let{value:s,onChange:t,placeholder:n,className:o,...d}=e,c=null==s?"":String(s);return(0,r.jsx)(i.p,{ref:a,type:"number",className:(0,l.cn)(o),value:c,placeholder:n,onChange:e=>{let a=e.target.value;if(""===a)t("");else{let e=Number(a);isNaN(e)||t(e)}},...d})});n.displayName="AppNumberInput"},46767:(e,a,s)=>{s.d(a,{Bc:()=>n,ZI:()=>c,k$:()=>d,m_:()=>o});var r=s(95155),t=s(12115),l=s(26852),i=s(64269);let n=l.Kq,o=l.bL,d=l.l9,c=t.forwardRef((e,a)=>{let{className:s,sideOffset:t=4,...n}=e;return(0,r.jsx)(l.UC,{ref:a,sideOffset:t,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});c.displayName=l.UC.displayName},50909:(e,a,s)=>{s.d(a,{C:()=>d,z:()=>o});var r=s(95155),t=s(12115),l=s(24058),i=s(75797),n=s(64269);let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.bL,{className:(0,n.cn)("grid gap-2",s),...t,ref:a})});o.displayName=l.bL.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.q7,{ref:a,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,r.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=l.q7.displayName},51834:(e,a,s)=>{s.d(a,{Cf:()=>f,Es:()=>p,HM:()=>u,L3:()=>h,c7:()=>x,lG:()=>o,rr:()=>v,zM:()=>d});var r=s(95155),t=s(12115),l=s(93409),i=s(26615),n=s(64269);let o=l.bL,d=l.l9,c=l.ZL,u=l.bm,m=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.hJ,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t})});m.displayName=l.hJ.displayName;let f=t.forwardRef((e,a)=>{let{className:s,children:t,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(l.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[t,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=l.UC.displayName;let x=e=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};x.displayName="DialogHeader";let p=e=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};p.displayName="DialogFooter";let h=t.forwardRef((e,a)=>{let{className:s,srOnly:t,...i}=e;return(0,r.jsx)(l.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t&&"sr-only",s),...i})});h.displayName=l.hE.displayName;let v=t.forwardRef((e,a)=>{let{className:s,srOnly:t,...i}=e;return(0,r.jsx)(l.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t&&"sr-only",s),...i})});v.displayName=l.VY.displayName},53875:(e,a,s)=>{s.d(a,{m:()=>t});var r=s(30926);let t=(0,r.createServerReference)("4097a27fb2ef90c8cb580cd7f7c1632b173a9ccb44",r.callServer,void 0,r.findSourceMapURL,"getClientByIdAction")},65142:(e,a,s)=>{s.d(a,{p:()=>i});var r=s(95155),t=s(12115),l=s(64269);let i=t.forwardRef((e,a)=>{let{className:s,type:t,...i}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...i})});i.displayName="Input"},72578:(e,a,s)=>{s.d(a,{g:()=>es});var r=s(95155),t=s(51834),l=s(3998),i=s(65142),n=s(76444),o=s(41052),d=s(22544),c=s(66942),u=s(98734),m=s(15894),f=s(12115),x=s(51982),p=s(92033),h=s(18155),v=s(98428),j=s(69489),b=s(20212),g=s(27314),N=s(5468),y=s(17037),w=s(82224),M=s(59253),C=s(14585),S=s(30926);let R=(0,S.createServerReference)("604bb3e03184f9809e83b9dd3b6a24a5c415138945",S.callServer,void 0,S.findSourceMapURL,"updateUserProfileAction"),k=(0,S.createServerReference)("609c884a4f068fa71d185959878bc19db114cc1bd2",S.callServer,void 0,S.findSourceMapURL,"updateUserPasswordAction"),A=(0,S.createServerReference)("60bb85978e75bd6c04a28394509b1193286f8e1205",S.callServer,void 0,S.findSourceMapURL,"updateClientSettingsAction"),L=(0,S.createServerReference)("60cefcefbc2794d6c6c4ed45b06c9ecafd0d4c4461",S.callServer,void 0,S.findSourceMapURL,"updateClientProfileAndGoalsAction"),I=(0,S.createServerReference)("406000cb33ba93eabbadafb9048049e4f4712d8b6f",S.callServer,void 0,S.findSourceMapURL,"createStripePortalSession");var U=s(35027);let z=(0,S.createServerReference)("40acf05b0225e38d0f2c4d95f30588e25c83a162f2",S.callServer,void 0,S.findSourceMapURL,"updateSiteSettingsAction");var G=s(44846),P=s(50909),J=s(85897),F=s(86259),B=s(11186),E=s(13496),V=s(64269),D=s(13406),T=s(53875),Y=s(21222);let q={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};var _=s(45458),O=s(83026);let Z=f.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsxs)(O.bL,{ref:a,className:(0,V.cn)("relative flex w-full touch-none select-none items-center",s),...t,children:[(0,r.jsx)(O.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(O.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(O.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});Z.displayName=O.bL.displayName;var $=s(86948),H=s(52619),W=s.n(H);let X=u.Ik({fullName:u.Yj().min(2,"Name is too short."),email:u.Yj().email("Invalid email address."),phone:u.Yj().optional()}),K=u.Ik({newPassword:u.Yj().min(8,"Password must be at least 8 characters."),confirmPassword:u.Yj()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]}),Q=u.Ik({activityLevel:u.k5(["sedentary","light","moderate","active","very_active"]),calculationMode:u.k5(["ideal","actual","custom"]),calorieModifier:u.au.number(),customMacros:u.Ik({protein:u.au.number().positive("Must be > 0").optional().or(u.eu("")),fat:u.au.number().positive("Must be > 0").optional().or(u.eu("")),carbs:u.au.number().nonnegative("Cannot be negative").optional().or(u.eu(0)).or(u.eu(""))})}),ee=u.Ik({url:u.Yj().url({message:"Please enter a valid URL."}).or(u.eu("")),videoCallLink:u.Yj().url({message:"Please enter a valid URL."}).or(u.eu("")),aiModelSettings:u.Ik({pro:u.Yj().optional(),flash:u.Yj().optional()}).optional()}),ea=[{id:"nutrition",label:"Nutrition Tracking"},{id:"hydration",label:"Hydration Tracking"},{id:"activity",label:"Activity Tracking"},{id:"sleep",label:"Sleep Tracking"},{id:"stress",label:"Stress/Cravings Tracking"},{id:"measurements",label:"Measurements Tracking"}];function es(e){var a,s;let{open:u,onOpenChange:S,defaultTab:O,defaultAccordion:H}=e,{toast:es}=(0,m.dj)(),{user:er,isCoach:et}=(0,w.A)(),[el,ei]=(0,f.useState)(!1),en=(0,f.useRef)(null),[eo,ed]=(0,f.useState)({}),[ec,eu]=(0,f.useState)(null),[em,ef]=(0,f.useState)(!0),[ex,ep]=(0,f.useState)(null),eh=(0,d.mN)({resolver:(0,c.u)(X),defaultValues:{fullName:"",email:"",phone:""}}),ev=(0,d.mN)({resolver:(0,c.u)(K)}),ej=(0,d.mN)({resolver:(0,c.u)(Q),defaultValues:{activityLevel:"light",calculationMode:"ideal",calorieModifier:0,customMacros:{protein:"",fat:"",carbs:""}}}),eb=(0,d.mN)({resolver:(0,c.u)(ee),defaultValues:{url:"",videoCallLink:"",aiModelSettings:{pro:"",flash:""}}}),eg=(0,d.FH)({control:ej.control});(0,f.useEffect)(()=>{var e,a,s,r;ec&&ec.onboarding&&eg&&ep(function(e){var a;let{onboarding:s,customGoals:r={},idealBodyWeight:t}=e;if(!s){let e={calculationMode:"ideal",calorieModifier:0,activityLevel:"light",tdee:2e3,calorieGoal:2e3,calorieGoalRange:{min:1800,max:2200},protein:150,fat:60,carbs:215,fiber:35};return{idealGoals:e,actualGoals:e,customGoals:e}}let{birthdate:l,height:i,units:n,weight:o,sex:d}=s,c="unspecified"===d?"male":d,u=(0,Y.V)(new Date,new Date(l)),m="imperial"===n?2.54*i:i,f=r.activityLevel||s.activityLevel||"light",x=q[f],p=(10*("imperial"===n?.453592*o:o)+6.25*m-5*u+("male"===c?5:-161))*x,h=t||Math.round(25*("metric"===n?i/2.54:i)**2/703),v=(.453592*h*10+6.25*m-5*u+("male"===c?5:-161))*x,j=Math.round(h),b="male"===c?100:50,g=Math.round((v-4*j-9*b)/4),N=p+(r.calorieModifier||0),y=Math.round((N-4*j-9*b)/4),w={calculationMode:"actual",calorieModifier:r.calorieModifier||0,activityLevel:f,tdee:Math.round(p),calorieGoal:Math.round(N),calorieGoalRange:{min:Math.round(.9*N),max:Math.round(1.1*N)},protein:j,fat:b,carbs:Math.max(0,y),fiber:35},M=N;"custom"===r.calculationMode&&(r.protein||r.fat||r.carbs)&&(M=4*(r.protein||0)+9*(r.fat||0)+4*(r.carbs||0));let C={...w,...r,calculationMode:r.calculationMode||"actual",calorieGoal:Math.round(M),calorieGoalRange:{min:Math.round(.9*M),max:Math.round(1.1*M)},protein:r.protein||w.protein,fat:r.fat||w.fat,carbs:null!=(a=r.carbs)?a:w.carbs};return{idealGoals:{calculationMode:"ideal",calorieModifier:0,activityLevel:f,tdee:Math.round(v),calorieGoal:Math.round(v),calorieGoalRange:{min:Math.round(.9*v),max:Math.round(1.1*v)},protein:j,fat:b,carbs:Math.max(0,g),fiber:35},actualGoals:w,customGoals:C}}({...ec,customGoals:{...ec.customGoals,activityLevel:eg.activityLevel,calculationMode:eg.calculationMode,calorieModifier:eg.calorieModifier,protein:"number"==typeof(null==(e=eg.customMacros)?void 0:e.protein)?eg.customMacros.protein:void 0,fat:"number"==typeof(null==(a=eg.customMacros)?void 0:a.fat)?eg.customMacros.fat:void 0,carbs:(null==(s=eg.customMacros)?void 0:s.carbs)===""?void 0:"number"==typeof(null==(r=eg.customMacros)?void 0:r.carbs)?eg.customMacros.carbs:void 0}}))},[ec,eg]);let eN=(0,f.useCallback)(async()=>{if(er&&!et){ef(!0);try{let o=await (0,T.m)(er.uid);if(o.success&&o.data){var e,a,s,r,t,l,i,n;let d=o.data;eu(d),eh.reset({fullName:d.fullName||"",email:d.email||""}),ed(d.trackingSettings||{}),ej.reset({activityLevel:(null==(e=d.customGoals)?void 0:e.activityLevel)||(null==(a=d.onboarding)?void 0:a.activityLevel)||"light",calculationMode:(null==(s=d.customGoals)?void 0:s.calculationMode)||"ideal",calorieModifier:(null==(r=d.customGoals)?void 0:r.calorieModifier)||0,customMacros:{protein:(null==(t=d.customGoals)?void 0:t.protein)||"",fat:(null==(l=d.customGoals)?void 0:l.fat)||"",carbs:null!=(n=null==(i=d.customGoals)?void 0:i.carbs)?n:""}})}}catch(e){es({variant:"destructive",title:"Error",description:"Could not load your profile."})}finally{ef(!1)}}},[er,et,eh,ej,es]);(0,f.useEffect)(()=>{let e=async()=>{if(er){ef(!0);try{let s=await (0,U.v)();if(s.success&&s.data){var e,a;eb.reset({url:s.data.url||"",videoCallLink:s.data.videoCallLink||"",aiModelSettings:{pro:(null==(e=s.data.aiModelSettings)?void 0:e.pro)||"",flash:(null==(a=s.data.aiModelSettings)?void 0:a.flash)||""}})}eh.reset({fullName:er.displayName||"",email:er.email||""})}catch(e){console.error("Failed to load site settings:",e),es({variant:"destructive",title:"Error",description:"Could not load site settings."})}finally{ef(!1)}}};u&&er&&(et?e():eN())},[er,u,et,eh,eb,eN,es]);let ey=async e=>{if(!er)return;ei(!0);let a=await R(er.uid,e);a.success?es({title:"Account Updated"}):es({variant:"destructive",title:"Error",description:a.error}),ei(!1)},ew=async e=>{if(!er)return;ei(!0);let a=await k(er.uid,e.newPassword);a.success?(es({title:"Password Updated!",description:"Please log in again with your new password."}),await (0,M.CI)(C.j2),S(!1)):es({variant:"destructive",title:"Error",description:a.error}),ei(!1)},eM=async e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s&&er){let e=new FileReader;e.onloadend=async()=>{let a=e.result;ei(!0);let s=await R(er.uid,{photoURL:a});s.success?(es({title:"Profile picture updated!"}),await er.reload()):es({variant:"destructive",title:"Error",description:s.error}),ei(!1)},e.readAsDataURL(s)}},eC=async(e,a)=>{er&&(ed({...eo,[e]:a}),(await A(er.uid,{[e]:a})).success||(es({variant:"destructive",title:"Error",description:"Could not save your preferences."}),ed(s=>({...s,[e]:!a}))),!1===a&&localStorage.removeItem("hasSeen_".concat(e)))},eS=async e=>{if(er){ei(!0);try{let a=await L(er.uid,e);if(a.success)es({title:"Goals Updated!",description:"Your nutritional targets have been saved."}),await eN();else throw Error(a.error||"An unknown error occurred.")}catch(e){es({variant:"destructive",title:"Error",description:e.message})}finally{ei(!1)}}},eR=async e=>{ei(!0);let a=await z(e);a.success?es({title:"Success!",description:"Site settings have been updated."}):es({variant:"destructive",title:"Error",description:a.error||"Failed to update settings."}),ei(!1)},ek=async()=>{await (0,M.CI)(C.j2),S(!1),es({title:"Logged Out"})},eA=async()=>{if(!er)return;ei(!0);let{url:e,error:a}=await I(er.uid);e?window.location.href=e:es({variant:"destructive",title:"Error",description:a||"Could not open billing portal."}),ei(!1)},eL=eg.calculationMode,eI="ideal"===eL?null==ex?void 0:ex.idealGoals:"actual"===eL?null==ex?void 0:ex.actualGoals:null==ex?void 0:ex.customGoals,eU=null==ex?void 0:ex.actualGoals.tdee,ez=()=>{var e,a;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(J.eu,{className:"h-20 w-20 border-2 border-primary",children:[(0,r.jsx)(J.BK,{src:(null==er?void 0:er.photoURL)||""}),(0,r.jsx)(J.q5,{className:"text-3xl",children:(null==ec||null==(e=ec.fullName)?void 0:e.charAt(0))||(null==er||null==(a=er.displayName)?void 0:a.charAt(0))})]}),(0,r.jsx)("input",{type:"file",ref:en,onChange:eM,className:"hidden",accept:"image/*"}),(0,r.jsx)(l.$,{size:"icon",variant:"secondary",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full border-2 border-background",onClick:()=>{var e;return null==(e=en.current)?void 0:e.click()},children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(o.lV,{...eh,children:(0,r.jsxs)("form",{id:"account-form",onSubmit:eh.handleSubmit(ey),className:"space-y-3",children:[(0,r.jsx)(o.zB,{control:eh.control,name:"fullName",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Full Name"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{...a})}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:eh.control,name:"email",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Email"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{type:"email",...a})}),(0,r.jsx)(o.C5,{})]})}})]})})})]}),(0,r.jsxs)(l.$,{type:"submit",form:"account-form",size:"sm",disabled:el,children:[el?(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Update Profile"]}),(0,r.jsx)(F.w,{className:"my-3"}),(0,r.jsx)(o.lV,{...ev,children:(0,r.jsxs)("form",{onSubmit:ev.handleSubmit(ew),className:"space-y-3",children:[(0,r.jsx)(o.zB,{control:ev.control,name:"newPassword",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"New Password"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{type:"password",...a})}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:ev.control,name:"confirmPassword",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Confirm New Password"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{type:"password",...a})}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsxs)(l.$,{type:"submit",size:"sm",variant:"secondary",disabled:el,children:[el?(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Update Password"]})]})}),(0,r.jsx)(F.w,{className:"my-3"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(l.$,{variant:"outline",className:"w-full",asChild:!0,children:(0,r.jsxs)(W(),{href:"/support",children:[(0,r.jsx)(h.A,{className:"mr-2"})," Help & Support"]})}),(0,r.jsxs)(l.$,{variant:"outline",className:"w-full",onClick:ek,children:[(0,r.jsx)(v.A,{className:"mr-2"})," Log Out"]})]})]})};return(0,r.jsx)(t.lG,{open:u,onOpenChange:S,children:(0,r.jsxs)(t.Cf,{className:"w-[90vw] max-w-lg h-[80vh] flex flex-col p-0",children:[(0,r.jsxs)(t.c7,{className:"p-4 border-b",children:[(0,r.jsx)(t.L3,{children:"Settings"}),(0,r.jsx)(t.rr,{children:"Manage your account and app preferences."})]}),(0,r.jsx)("div",{className:"flex-1 min-h-0",children:(0,r.jsx)(y.F,{className:"h-full",children:(0,r.jsx)("div",{className:"p-2 sm:p-4",children:em?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(p.A,{className:"h-8 w-8 animate-spin"})}):et?(0,r.jsxs)(D.tU,{defaultValue:O||"account",className:"w-full h-full flex flex-col",children:[(0,r.jsxs)(D.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(D.Xi,{value:"account",children:"My Account"}),(0,r.jsx)(D.Xi,{value:"site",children:"Site Settings"})]}),(0,r.jsxs)("div",{className:"flex-1 min-h-0 py-4",children:[(0,r.jsx)(D.av,{value:"account",className:"mt-0",children:ez()}),(0,r.jsxs)(D.av,{value:"site",className:"mt-0 space-y-4",children:[(0,r.jsx)(o.lV,{...eb,children:(0,r.jsxs)("form",{id:"site-settings-form",onSubmit:eb.handleSubmit(eR),className:"space-y-2",children:[(0,r.jsxs)($.Zp,{children:[(0,r.jsxs)($.aR,{className:"p-4",children:[(0,r.jsx)($.ZB,{children:"Global Site Settings"}),(0,r.jsx)($.BT,{children:"Set global links for the application."})]}),(0,r.jsxs)($.Wu,{className:"p-4 pt-0 space-y-3",children:[(0,r.jsx)(o.zB,{control:eb.control,name:"url",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Website URL"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{placeholder:"https://hungerfreeandhappy.com",...a})}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:eb.control,name:"videoCallLink",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Default Video Call Link"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{placeholder:"https://zoom.us/j/1234567890",...a})}),(0,r.jsx)(o.C5,{})]})}})]})]}),(0,r.jsxs)($.Zp,{children:[(0,r.jsxs)($.aR,{className:"p-4",children:[(0,r.jsxs)($.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(j.A,{})," AI Model Configuration"]}),(0,r.jsx)($.BT,{children:"Define which Google AI models the app should use for various tasks."})]}),(0,r.jsxs)($.Wu,{className:"p-4 pt-0 space-y-3",children:[(0,r.jsx)(o.zB,{control:eb.control,name:"aiModelSettings.pro",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Pro Model Name"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{...a,placeholder:"e.g., gemini-pro"})}),(0,r.jsx)(o.Rr,{className:"text-xs",children:"Used for complex reasoning and insights."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:eb.control,name:"aiModelSettings.flash",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Flash Model Name"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(i.p,{...a,placeholder:"e.g., gemini-flash"})}),(0,r.jsx)(o.Rr,{className:"text-xs",children:"Used for faster, simpler tasks."}),(0,r.jsx)(o.C5,{})]})}})]})]})]})}),(0,r.jsxs)(l.$,{type:"submit",form:"site-settings-form",size:"sm",disabled:el,children:[el&&(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save All Site Settings"]})]})]})]}):(0,r.jsxs)(D.tU,{defaultValue:O||"account",className:"w-full h-full flex flex-col",children:[(0,r.jsxs)(D.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(D.Xi,{value:"account",children:"My Account"}),(0,r.jsx)(D.Xi,{value:"subscription",children:"Subscription"})]}),(0,r.jsxs)("div",{className:"flex-1 min-h-0 py-4",children:[(0,r.jsx)(D.av,{value:"account",className:"mt-0",children:(0,r.jsxs)(E.Accordion,{type:"single",collapsible:!0,className:"w-full space-y-2",defaultValue:H||"goals",children:[(0,r.jsxs)(E.AccordionItem,{value:"goals",className:"border rounded-lg overflow-hidden",children:[(0,r.jsx)(E.AccordionTrigger,{className:"px-3 py-2 hover:no-underline bg-muted/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-5 w-5"}),(0,r.jsx)("h3",{className:"font-semibold text-base",children:"Goals"})]})}),(0,r.jsxs)(E.AccordionContent,{className:"p-3 space-y-2",children:[(0,r.jsx)(o.lV,{...ej,children:(0,r.jsxs)("form",{id:"goals-form",onSubmit:ej.handleSubmit(eS),className:"space-y-3",children:[(0,r.jsx)(o.zB,{control:ej.control,name:"calculationMode",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Calculation Mode"}),(0,r.jsxs)(P.z,{onValueChange:a.onChange,value:a.value,className:"grid grid-cols-3 gap-1",children:[(0,r.jsx)(o.eI,{children:(0,r.jsxs)(n.J,{htmlFor:"ideal",className:(0,V.cn)("flex text-xs h-9 items-center justify-center rounded-md border-2 border-muted bg-popover p-1 hover:bg-accent hover:text-accent-foreground cursor-pointer","ideal"===a.value&&"border-primary"),children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(P.C,{value:"ideal",id:"ideal",className:"sr-only"})}),"Ideal"]})}),(0,r.jsx)(o.eI,{children:(0,r.jsxs)(n.J,{htmlFor:"actual",className:(0,V.cn)("flex text-xs h-9 items-center justify-center rounded-md border-2 border-muted bg-popover p-1 hover:bg-accent hover:text-accent-foreground cursor-pointer","actual"===a.value&&"border-primary"),children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(P.C,{value:"actual",id:"actual",className:"sr-only"})}),"Actual"]})}),(0,r.jsx)(o.eI,{children:(0,r.jsxs)(n.J,{htmlFor:"custom",className:(0,V.cn)("flex text-xs h-9 items-center justify-center rounded-md border-2 border-muted bg-popover p-1 hover:bg-accent hover:text-accent-foreground cursor-pointer","custom"===a.value&&"border-primary"),children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(P.C,{value:"custom",id:"custom",className:"sr-only"})}),"Custom"]})})]}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:ej.control,name:"activityLevel",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Activity Level"}),(0,r.jsxs)(B.l6,{onValueChange:a.onChange,value:a.value,children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(B.bq,{children:(0,r.jsx)(B.yv,{})})}),(0,r.jsxs)(B.gC,{children:[(0,r.jsx)(B.eb,{value:"sedentary",children:"Sedentary"}),(0,r.jsx)(B.eb,{value:"light",children:"Lightly Active"}),(0,r.jsx)(B.eb,{value:"moderate",children:"Moderately Active"}),(0,r.jsx)(B.eb,{value:"active",children:"Very Active"}),(0,r.jsx)(B.eb,{value:"very_active",children:"Extra Active"})]})]}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsxs)("div",{className:"p-1 rounded-md bg-muted/50 text-center",children:[(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Est. Maintenance Calories (TDEE)"}),(0,r.jsx)("p",{className:"text-base font-bold",children:null==eU?void 0:eU.toLocaleString()})]}),"actual"===eL&&(0,r.jsx)(o.zB,{control:ej.control,name:"calorieModifier",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,r.jsx)(o.lR,{className:"text-xs",children:"Calorie Adjustment"}),(0,r.jsxs)("span",{className:(0,V.cn)("font-bold text-sm",a.value<0?"text-red-400":"text-green-400"),children:[a.value>0?"+":"",a.value]})]}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(Z,{value:[a.value],onValueChange:e=>a.onChange(e[0]),min:-1e3,max:1e3,step:50})})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,r.jsxs)("div",{className:"p-1 rounded-md bg-muted/50 text-center h-full",children:[(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Daily Calorie Goal"}),(0,r.jsx)("p",{className:"font-bold text-base",children:Math.round((null==eI?void 0:eI.calorieGoal)||0).toLocaleString()})]}),(0,r.jsxs)("div",{className:"p-1 rounded-md bg-muted/50 text-center h-full",children:[(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Goal Range"}),(0,r.jsxs)("p",{className:"font-bold text-base",children:[Math.round((null==eI||null==(a=eI.calorieGoalRange)?void 0:a.min)||0).toLocaleString()," - ",Math.round((null==eI||null==(s=eI.calorieGoalRange)?void 0:s.max)||0).toLocaleString()]})]})]}),"custom"!==eL?(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Suggested Daily Macros"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Protein"}),(0,r.jsxs)("p",{className:"font-bold",children:[Math.round((null==eI?void 0:eI.protein)||0),"g"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Fat"}),(0,r.jsxs)("p",{className:"font-bold",children:[Math.round((null==eI?void 0:eI.fat)||0),"g"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Carbs"}),(0,r.jsxs)("p",{className:(0,V.cn)("font-bold",0>((null==eI?void 0:eI.carbs)||0)&&"text-destructive"),children:[Math.round((null==eI?void 0:eI.carbs)||0),"g"]})]})]})]}):(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Custom Daily Macros"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 pt-1",children:[(0,r.jsx)(o.zB,{control:ej.control,name:"customMacros.protein",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{className:"text-xs",children:"Protein (g)"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(_.d,{...a,maxLength:3})}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:ej.control,name:"customMacros.fat",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{className:"text-xs",children:"Fat (g)"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(_.d,{...a,maxLength:3})}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:ej.control,name:"customMacros.carbs",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{className:"text-xs",children:"Carbs (g)"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(_.d,{...a,maxLength:3})}),(0,r.jsx)(o.C5,{})]})}})]})]})]})}),(0,r.jsxs)(l.$,{type:"submit",form:"goals-form",className:"w-full",disabled:el,children:[el&&(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Goals"]})]})]}),(0,r.jsxs)(E.AccordionItem,{value:"account",className:"border rounded-lg overflow-hidden",children:[(0,r.jsx)(E.AccordionTrigger,{className:"px-3 py-2 hover:no-underline bg-muted/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-5 w-5"}),(0,r.jsx)("h3",{className:"font-semibold text-base",children:"Account"})]})}),(0,r.jsx)(E.AccordionContent,{className:"p-3 space-y-3",children:ez()})]}),(0,r.jsxs)(E.AccordionItem,{value:"tracking",className:"border rounded-lg overflow-hidden",children:[(0,r.jsx)(E.AccordionTrigger,{className:"px-3 py-2 hover:no-underline bg-muted/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"h-5 w-5"}),(0,r.jsx)("h3",{className:"font-semibold text-base",children:"Tracking Preferences"})]})}),(0,r.jsxs)(E.AccordionContent,{className:"p-3 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50",children:[(0,r.jsx)(n.J,{htmlFor:"units",children:"Unit System"}),(0,r.jsxs)(P.z,{defaultValue:eo.units||"imperial",className:"flex",onValueChange:e=>eC("units",e),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.C,{value:"metric",id:"r1"}),(0,r.jsx)(n.J,{htmlFor:"r1",children:"Metric"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.C,{value:"imperial",id:"r2"}),(0,r.jsx)(n.J,{htmlFor:"r2",children:"Imperial"})]})]})]}),ea.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50",children:[(0,r.jsx)(n.J,{htmlFor:e.id,children:e.label}),(0,r.jsx)(G.d,{id:e.id,checked:!1!==eo[e.id],onCheckedChange:a=>eC(e.id,a)})]},e.id))]})]})]})}),(0,r.jsx)(D.av,{value:"subscription",className:"mt-0 space-y-4",children:(0,r.jsxs)($.Zp,{children:[(0,r.jsxs)($.aR,{children:[(0,r.jsx)($.ZB,{children:"Subscription & Billing"}),(0,r.jsx)($.BT,{children:"Manage your subscription and payment details through our secure portal."})]}),(0,r.jsx)($.Wu,{children:(0,r.jsxs)(l.$,{onClick:eA,disabled:el,className:"w-full",children:[el&&(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Manage Billing"]})})]})})]})]})})})})]})})}},76444:(e,a,s)=>{s.d(a,{J:()=>d});var r=s(95155),t=s(12115),l=s(32894),i=s(83101),n=s(64269);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.b,{ref:a,className:(0,n.cn)(o(),s),...t})});d.displayName=l.b.displayName},85897:(e,a,s)=>{s.d(a,{BK:()=>o,eu:()=>n,q5:()=>d});var r=s(95155),t=s(12115),l=s(63366),i=s(64269);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.bL,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t})});n.displayName=l.bL.displayName;let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l._V,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",s),...t})});o.displayName=l._V.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.H4,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t})});d.displayName=l.H4.displayName},86259:(e,a,s)=>{s.d(a,{w:()=>n});var r=s(95155),t=s(12115),l=s(47321),i=s(64269);let n=t.forwardRef((e,a)=>{let{className:s,orientation:t="horizontal",decorative:n=!0,...o}=e;return(0,r.jsx)(l.b,{ref:a,decorative:n,orientation:t,className:(0,i.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",s),...o})});n.displayName=l.b.displayName},89836:(e,a,s)=>{s.d(a,{qT:()=>c,vg:()=>m,TN:()=>u});var r=s(95155),t=s(12115),l=s(82224),i=s(30926);let n=(0,i.createServerReference)("404eb87de48f84714de5776337dfd1ae8e14629a85",i.callServer,void 0,i.findSourceMapURL,"getChatsForClient"),o=(0,t.createContext)(void 0),d=(0,t.createContext)(void 0);function c(e){let{children:a}=e,{user:s}=(0,l.A)(),[i,c]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1),[f,x]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),[v,j]=(0,t.useState)(!1),b=(0,t.useCallback)(async()=>{if(!s)return;let e=await n(s.uid);e.success&&e.data&&c(e.data)},[s]);(0,t.useEffect)(()=>{s&&b()},[s,b]);let g=(0,t.useMemo)(()=>!!s&&!!i&&i.some(e=>{let a=e.lastMessageSenderId;return a&&a!==s.uid}),[i,s]),N=(0,t.useMemo)(()=>({chats:i,hasUnreadChats:g,fetchChats:b}),[i,g,b]),y=(0,t.useMemo)(()=>({onOpenChallenges:()=>m(!0),onOpenChats:()=>x(!0),onOpenCalendar:()=>h(!0),onOpenSettings:()=>j(!0),isChallengesOpen:u,isChatsOpen:f,isCalendarOpen:p,isSettingsOpen:v,onCloseChallenges:()=>m(!1),onCloseChats:()=>x(!1),onCloseCalendar:()=>h(!1),onCloseSettings:()=>j(!1)}),[u,f,p,v]);return(0,r.jsx)(o.Provider,{value:N,children:(0,r.jsx)(d.Provider,{value:y,children:a})})}function u(){let e=(0,t.useContext)(o);if(void 0===e)throw Error("useDashboardState must be used within a DashboardProvider");return e}function m(){let e=(0,t.useContext)(d);if(void 0===e)throw Error("useDashboardActions must be used within a DashboardProvider");return e}}}]);